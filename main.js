(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var i=e.g.document;if(!t&&i&&(i.currentScript&&(t=i.currentScript.src),!t)){var s=i.getElementsByTagName("script");if(s.length)for(var d=s.length-1;d>-1&&!t;)t=s[d--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=new Map([["Backquote",{default:"`",shifted:"~"}],["Digit1",{default:"1",shifted:"!"}],["Digit2",{default:"2",shifted:"@"}],["Digit3",{default:"3",shifted:"#"}],["Digit4",{default:"4",shifted:"$"}],["Digit5",{default:"5",shifted:"%"}],["Digit6",{default:"6",shifted:"^"}],["Digit7",{default:"7",shifted:"&"}],["Digit8",{default:"8",shifted:"*"}],["Digit9",{default:"9",shifted:"("}],["Digit0",{default:"0",shifted:")"}],["Minus",{default:"-",shifted:"_"}],["Equal",{default:"=",shifted:"+"}],["Backspace",{default:"⌫",shifted:"⌫"}],["Delete",{default:"␡",shifted:"␡"}],["Tab",{default:"↹",shifted:"↹"}],["KeyQ",{default:"q",shifted:"Q"}],["KeyW",{default:"w",shifted:"W"}],["KeyE",{default:"e",shifted:"E"}],["KeyR",{default:"r",shifted:"R"}],["KeyT",{default:"t",shifted:"T"}],["KeyY",{default:"y",shifted:"Y"}],["KeyU",{default:"u",shifted:"U"}],["KeyI",{default:"i",shifted:"I"}],["KeyO",{default:"o",shifted:"O"}],["KeyP",{default:"p",shifted:"P"}],["BracketLeft",{default:"[",shifted:"{"}],["BracketRight",{default:"]",shifted:"}"}],["Backslash",{default:"\\",shifted:"|"}],["CapsLock",{default:"⇪",shifted:"⇪"}],["KeyA",{default:"a",shifted:"A"}],["KeyS",{default:"s",shifted:"S"}],["KeyD",{default:"d",shifted:"D"}],["KeyF",{default:"f",shifted:"F"}],["KeyG",{default:"g",shifted:"G"}],["KeyH",{default:"h",shifted:"H"}],["KeyJ",{default:"j",shifted:"J"}],["KeyK",{default:"k",shifted:"K"}],["KeyL",{default:"l",shifted:"L"}],["Semicolon",{default:";",shifted:":"}],["Quote",{default:"'",shifted:'"'}],["Enter",{default:"↵",shifted:"↵"}],["ShiftLeft",{default:"⇧",shifted:"⇧"}],["KeyZ",{default:"z",shifted:"Z"}],["KeyX",{default:"x",shifted:"X"}],["KeyC",{default:"c",shifted:"C"}],["KeyV",{default:"v",shifted:"V"}],["KeyB",{default:"b",shifted:"B"}],["KeyN",{default:"n",shifted:"N"}],["KeyM",{default:"m",shifted:"M"}],["Comma",{default:",",shifted:"<"}],["Period",{default:".",shifted:">"}],["Slash",{default:"/",shifted:"?"}],["ArrowUp",{default:"↑",shifted:"↑"}],["ShiftRight",{default:"⇧",shifted:"⇧"}],["ControlLeft",{default:"⎈",shifted:"⎈"}],["MetaLeft",{default:"⊞",shifted:"⊞"}],["AltLeft",{default:"⎇",shifted:"⎇"}],["Space",{default:" ",shifted:" "}],["AltRight",{default:"⎇",shifted:"⎇"}],["ArrowLeft",{default:"←",shifted:"←"}],["ArrowDown",{default:"↓",shifted:"↓"}],["ArrowRight",{default:"→",shifted:"→"}],["ControlRight",{default:"⎈",shifted:"⎈"}]]),i=new Map([["Backquote",{default:"ё",shifted:"Ё"}],["Digit1",{default:"1",shifted:"!"}],["Digit2",{default:"2",shifted:'"'}],["Digit3",{default:"3",shifted:"№"}],["Digit4",{default:"4",shifted:";"}],["Digit5",{default:"5",shifted:"%"}],["Digit6",{default:"6",shifted:":"}],["Digit7",{default:"7",shifted:"?"}],["Digit8",{default:"8",shifted:"*"}],["Digit9",{default:"9",shifted:"("}],["Digit0",{default:"0",shifted:")"}],["Minus",{default:"-",shifted:"_"}],["Equal",{default:"=",shifted:"+"}],["Backspace",{default:"⌫",shifted:"⌫"}],["Delete",{default:"␡",shifted:"␡"}],["Tab",{default:"↹",shifted:"↹"}],["KeyQ",{default:"й",shifted:"Й"}],["KeyW",{default:"ц",shifted:"Ц"}],["KeyE",{default:"у",shifted:"У"}],["KeyR",{default:"к",shifted:"К"}],["KeyT",{default:"е",shifted:"Е"}],["KeyY",{default:"н",shifted:"Н"}],["KeyU",{default:"г",shifted:"Г"}],["KeyI",{default:"ш",shifted:"Ш"}],["KeyO",{default:"щ",shifted:"Щ"}],["KeyP",{default:"з",shifted:"З"}],["BracketLeft",{default:"х",shifted:"Х"}],["BracketRight",{default:"ъ",shifted:"Ъ"}],["Backslash",{default:"\\",shifted:"/"}],["CapsLock",{default:"⇪",shifted:"⇪"}],["KeyA",{default:"ф",shifted:"Ф"}],["KeyS",{default:"ы",shifted:"Ы"}],["KeyD",{default:"в",shifted:"В"}],["KeyF",{default:"а",shifted:"А"}],["KeyG",{default:"п",shifted:"П"}],["KeyH",{default:"р",shifted:"Р"}],["KeyJ",{default:"о",shifted:"О"}],["KeyK",{default:"л",shifted:"Л"}],["KeyL",{default:"д",shifted:"Д"}],["Semicolon",{default:"ж",shifted:"Ж"}],["Quote",{default:"э",shifted:"Э"}],["Enter",{default:"↵",shifted:"↵"}],["ShiftLeft",{default:"⇧",shifted:"⇧"}],["KeyZ",{default:"я",shifted:"Я"}],["KeyX",{default:"ч",shifted:"Ч"}],["KeyC",{default:"с",shifted:"С"}],["KeyV",{default:"м",shifted:"М"}],["KeyB",{default:"и",shifted:"И"}],["KeyN",{default:"т",shifted:"Т"}],["KeyM",{default:"ь",shifted:"Ь"}],["Comma",{default:"б",shifted:"Б"}],["Period",{default:"ю",shifted:"Ю"}],["Slash",{default:".",shifted:","}],["ArrowUp",{default:"↑",shifted:"↑"}],["ShiftRight",{default:"⇧",shifted:"⇧"}],["ControlLeft",{default:"⎈",shifted:"⎈"}],["MetaLeft",{default:"⊞",shifted:"⊞"}],["AltLeft",{default:"⎇",shifted:"⎇"}],["Space",{default:" ",shifted:" "}],["AltRight",{default:"⎇",shifted:"⎇"}],["ArrowLeft",{default:"←",shifted:"←"}],["ArrowDown",{default:"↓",shifted:"↓"}],["ArrowRight",{default:"→",shifted:"→"}],["ControlRight",{default:"⎈",shifted:"⎈"}]]);class s{static prefix="[er-virtual-keyboard]";static set(e,t){localStorage[this.prefix+e]=JSON.stringify({value:t})}static get(e,t){const i=localStorage[this.prefix+e];return i?JSON.parse(i).value:t||null}}class d{constructor(e,t,i){const s=document.createElement(e);t&&(s.className=t),i&&Object.assign(s,i),this.node=s}append(...e){this.node.append(...e.map((e=>(e=>"string"==typeof e?document.createTextNode(e):e instanceof d?e.node:e)(e))))}}class f extends d{constructor(e,t){super("button",`${t} ${e}`),this.code=e}}class a extends d{locales=new Map([["en",t],["ru",i]]);keys=new Map;mods=new Map([["ShiftLeft",!1],["ShiftRight",!1],["CapsLock",!1],["AltLeft",!1]]);constructor(e,i){super("ul","keyboard",i),this.textField=e,t.forEach(((e,t)=>{const i=new d("li","keyboard__item"),s=new f(t,"keyboard__key");this.append(i),i.append(s),this.keys.set(t,s)})),this.mods=new Proxy(this.mods,{get:(e,t)=>e.get(t),set:(e,t,i)=>(e.set(t,i),this.getKeyNode(t).classList[i?"add":"remove"]("toggled"),this.renderLayout(),!0)});const s=new Map([["Backspace",()=>e.useAction("backspace")],["Delete",()=>e.useAction("delete")],["Tab",()=>e.useAction("tab")],["Enter",()=>e.useAction("enter")],["CapsLock",()=>{this.mods.CapsLock=!this.mods.CapsLock}],["ShiftLeft",({repeat:e})=>{this.mods.ShiftLeft=e||!this.mods.ShiftLeft,this.mods.AltLeft&&this.switchLocale()}],["ShiftRight",({repeat:e})=>{this.mods.ShiftRight=e||!this.mods.ShiftRight}],["ControlLeft",()=>{}],["ControlRight",()=>{}],["AltLeft",()=>{this.mods.AltLeft=!this.mods.AltLeft,this.mods.ShiftLeft&&this.switchLocale()}],["AltRight",()=>{}],["MetaLeft",()=>{}],["ArrowUp",()=>e.useAction("up")],["ArrowLeft",()=>e.useAction("left")],["ArrowDown",()=>e.useAction("down")],["ArrowRight",()=>e.useAction("right")],["default",(t,{value:i})=>{e.useAction("insert",i),t.shiftKey||([this.mods.ShiftLeft,this.mods.ShiftRight]=[!1,!1])}]]);this.useHandler=(e,t,i)=>(s.get(t)??s.get("default"))(e,i),this.renderLayout(),this.init()}init(){window.addEventListener("keydown",(e=>{const t=this.getKeyNode(e.code);t&&(this.useHandler(e,e.code,t),t.classList.add("active"),e.preventDefault())})),window.addEventListener("keyup",(e=>{const t=this.getKeyNode(e.code);t&&(["ShiftLeft","ShiftRight"].includes(e.code)&&(this.mods[e.code]=!1),t.classList.remove("active"),e.preventDefault())})),this.keys.forEach((({node:e},t)=>e.addEventListener("click",(i=>this.useHandler(i,t,e)))))}renderLayout(){const[e,t]=[this.mods.CapsLock,this.mods.ShiftLeft||this.mods.ShiftRight],i=this.locales.get(s.get("locale","en"));this.keys.forEach((s=>{const{code:d,node:f}=s,a=i.get(d)[t?"shifted":"default"];f.value=e?a[t?"toLowerCase":"toUpperCase"]():a}))}switchLocale(){s.set("locale","en"===s.get("locale","en")?"ru":"en"),[this.mods.ShiftLeft,this.mods.AltLeft]=[!1,!1]}getKeyNode(e){return this.keys.get(e)?.node}}const h=e.p+"c4e573428c57576dc136.jpg",o=e.p+"d108ad65c5881b9fe9bc.mp4";class l extends d{constructor(){super("video","bg-video",{autoplay:!0,loop:!0,muted:!0,poster:h});const e=new d("source","bg-video__source",{src:o,type:"video/mp4"});this.append(e)}}const n=e.p+"f17adfe119861945d686.ogg";class u{static quack=new Audio(n);static sayQuack(){return this.quack.currentTime=0,this.quack.play()}}class c extends d{constructor(e,t){super("textarea",e||"text-field",{autofocus:!0,rows:4,cols:60,...t})}useAction(e,...t){this.actions.get(e)(...t),this.node.blur(),this.node.focus()}actions=new Map([["insert",e=>{const{selectionStart:t,selectionEnd:i}=this.node;this.node.setRangeText(e,t,i,"end")}],["enter",()=>this.insert("\n")],["tab",()=>this.insert("\t")],["backspace",()=>{const{selectionStart:e,selectionEnd:t}=this.node;t&&this.node.setRangeText("",e-(e===t),t,"end")}],["delete",()=>{const{selectionStart:e,selectionEnd:t}=this.node;this.node.setRangeText("",e,t+(e===t),"end")}],["left",()=>{this.node.selectionStart-=1,this.node.selectionEnd=this.node.selectionStart}],["right",()=>{this.node.selectionEnd+=1,this.node.selectionStart=this.node.selectionEnd}],["up",()=>{const{selectionStart:e,cols:t,value:i}=this.node;this.node.selectionEnd=Math.max(i.lastIndexOf("\n",e-1),e-t-1,0),this.node.selectionStart=this.node.selectionEnd}],["down",()=>{const{cols:e,selectionEnd:t,value:i}=this.node;this.node.selectionEnd=Math.min(i.indexOf("\n",t+1),t+e+1,i.length),this.node.selectionStart=this.node.selectionEnd}]])}new class{constructor(e){this.root=e}run(){const e=new l,t=new d("main","main"),i=new d("section","section"),s=new c,f=new d("h1","heading",{textContent:"Virtual Keyboard"}),h=new d("span","duck",{textContent:"🦆",onmousedown:()=>u.sayQuack()}),o=new a(s),n=new d("p","disclaimer",{innerText:"The keyboard was created in the Windows 10 OS\nCombination for language switch: "}),r=new d("span","combination",{textContent:"left alt[⎇] + shift[⇧]",onclick:()=>o.switchLocale()});this.root.append(e.node,t.node),t.append(i),f.append(h),n.append(r),i.append(f,s,o,n)}}(document.body).run()})();