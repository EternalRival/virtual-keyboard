(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var d=e.g.document;if(!t&&d&&(d.currentScript&&(t=d.currentScript.src),!t)){var s=d.getElementsByTagName("script");if(s.length)for(var i=s.length-1;i>-1&&!t;)t=s[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})();const t=new Map([["Backquote",{default:"`",shifted:"~"}],["Digit1",{default:"1",shifted:"!"}],["Digit2",{default:"2",shifted:"@"}],["Digit3",{default:"3",shifted:"#"}],["Digit4",{default:"4",shifted:"$"}],["Digit5",{default:"5",shifted:"%"}],["Digit6",{default:"6",shifted:"^"}],["Digit7",{default:"7",shifted:"&"}],["Digit8",{default:"8",shifted:"*"}],["Digit9",{default:"9",shifted:"("}],["Digit0",{default:"0",shifted:")"}],["Minus",{default:"-",shifted:"_"}],["Equal",{default:"=",shifted:"+"}],["Backspace",{default:"‚å´",shifted:"‚å´"}],["Delete",{default:"‚ê°",shifted:"‚ê°"}],["Tab",{default:"‚Üπ",shifted:"‚Üπ"}],["KeyQ",{default:"q",shifted:"Q"}],["KeyW",{default:"w",shifted:"W"}],["KeyE",{default:"e",shifted:"E"}],["KeyR",{default:"r",shifted:"R"}],["KeyT",{default:"t",shifted:"T"}],["KeyY",{default:"y",shifted:"Y"}],["KeyU",{default:"u",shifted:"U"}],["KeyI",{default:"i",shifted:"I"}],["KeyO",{default:"o",shifted:"O"}],["KeyP",{default:"p",shifted:"P"}],["BracketLeft",{default:"[",shifted:"{"}],["BracketRight",{default:"]",shifted:"}"}],["Backslash",{default:"\\",shifted:"|"}],["CapsLock",{default:"‚á™",shifted:"‚á™"}],["KeyA",{default:"a",shifted:"A"}],["KeyS",{default:"s",shifted:"S"}],["KeyD",{default:"d",shifted:"D"}],["KeyF",{default:"f",shifted:"F"}],["KeyG",{default:"g",shifted:"G"}],["KeyH",{default:"h",shifted:"H"}],["KeyJ",{default:"j",shifted:"J"}],["KeyK",{default:"k",shifted:"K"}],["KeyL",{default:"l",shifted:"L"}],["Semicolon",{default:";",shifted:":"}],["Quote",{default:"'",shifted:'"'}],["Enter",{default:"‚Üµ",shifted:"‚Üµ"}],["ShiftLeft",{default:"‚áß",shifted:"‚áß"}],["KeyZ",{default:"z",shifted:"Z"}],["KeyX",{default:"x",shifted:"X"}],["KeyC",{default:"c",shifted:"C"}],["KeyV",{default:"v",shifted:"V"}],["KeyB",{default:"b",shifted:"B"}],["KeyN",{default:"n",shifted:"N"}],["KeyM",{default:"m",shifted:"M"}],["Comma",{default:",",shifted:"<"}],["Period",{default:".",shifted:">"}],["Slash",{default:"/",shifted:"?"}],["ArrowUp",{default:"‚Üë",shifted:"‚Üë"}],["ShiftRight",{default:"‚áß",shifted:"‚áß"}],["ControlLeft",{default:"‚éà",shifted:"‚éà"}],["MetaLeft",{default:"‚äû",shifted:"‚äû"}],["AltLeft",{default:"‚éá",shifted:"‚éá"}],["Space",{default:" ",shifted:" "}],["AltRight",{default:"‚éá",shifted:"‚éá"}],["ArrowLeft",{default:"‚Üê",shifted:"‚Üê"}],["ArrowDown",{default:"‚Üì",shifted:"‚Üì"}],["ArrowRight",{default:"‚Üí",shifted:"‚Üí"}],["ControlRight",{default:"‚éà",shifted:"‚éà"}]]),d=new Map([["Backquote",{default:"—ë",shifted:"–Å"}],["Digit1",{default:"1",shifted:"!"}],["Digit2",{default:"2",shifted:'"'}],["Digit3",{default:"3",shifted:"‚Ññ"}],["Digit4",{default:"4",shifted:";"}],["Digit5",{default:"5",shifted:"%"}],["Digit6",{default:"6",shifted:":"}],["Digit7",{default:"7",shifted:"?"}],["Digit8",{default:"8",shifted:"*"}],["Digit9",{default:"9",shifted:"("}],["Digit0",{default:"0",shifted:")"}],["Minus",{default:"-",shifted:"_"}],["Equal",{default:"=",shifted:"+"}],["Backspace",{default:"‚å´",shifted:"‚å´"}],["Delete",{default:"‚ê°",shifted:"‚ê°"}],["Tab",{default:"‚Üπ",shifted:"‚Üπ"}],["KeyQ",{default:"–π",shifted:"–ô"}],["KeyW",{default:"—Ü",shifted:"–¶"}],["KeyE",{default:"—É",shifted:"–£"}],["KeyR",{default:"–∫",shifted:"–ö"}],["KeyT",{default:"–µ",shifted:"–ï"}],["KeyY",{default:"–Ω",shifted:"–ù"}],["KeyU",{default:"–≥",shifted:"–ì"}],["KeyI",{default:"—à",shifted:"–®"}],["KeyO",{default:"—â",shifted:"–©"}],["KeyP",{default:"–∑",shifted:"–ó"}],["BracketLeft",{default:"—Ö",shifted:"–•"}],["BracketRight",{default:"—ä",shifted:"–™"}],["Backslash",{default:"\\",shifted:"/"}],["CapsLock",{default:"‚á™",shifted:"‚á™"}],["KeyA",{default:"—Ñ",shifted:"–§"}],["KeyS",{default:"—ã",shifted:"–´"}],["KeyD",{default:"–≤",shifted:"–í"}],["KeyF",{default:"–∞",shifted:"–ê"}],["KeyG",{default:"–ø",shifted:"–ü"}],["KeyH",{default:"—Ä",shifted:"–†"}],["KeyJ",{default:"–æ",shifted:"–û"}],["KeyK",{default:"–ª",shifted:"–õ"}],["KeyL",{default:"–¥",shifted:"–î"}],["Semicolon",{default:"–∂",shifted:"–ñ"}],["Quote",{default:"—ç",shifted:"–≠"}],["Enter",{default:"‚Üµ",shifted:"‚Üµ"}],["ShiftLeft",{default:"‚áß",shifted:"‚áß"}],["KeyZ",{default:"—è",shifted:"–Ø"}],["KeyX",{default:"—á",shifted:"–ß"}],["KeyC",{default:"—Å",shifted:"–°"}],["KeyV",{default:"–º",shifted:"–ú"}],["KeyB",{default:"–∏",shifted:"–ò"}],["KeyN",{default:"—Ç",shifted:"–¢"}],["KeyM",{default:"—å",shifted:"–¨"}],["Comma",{default:"–±",shifted:"–ë"}],["Period",{default:"—é",shifted:"–Æ"}],["Slash",{default:".",shifted:","}],["ArrowUp",{default:"‚Üë",shifted:"‚Üë"}],["ShiftRight",{default:"‚áß",shifted:"‚áß"}],["ControlLeft",{default:"‚éà",shifted:"‚éà"}],["MetaLeft",{default:"‚äû",shifted:"‚äû"}],["AltLeft",{default:"‚éá",shifted:"‚éá"}],["Space",{default:" ",shifted:" "}],["AltRight",{default:"‚éá",shifted:"‚éá"}],["ArrowLeft",{default:"‚Üê",shifted:"‚Üê"}],["ArrowDown",{default:"‚Üì",shifted:"‚Üì"}],["ArrowRight",{default:"‚Üí",shifted:"‚Üí"}],["ControlRight",{default:"‚éà",shifted:"‚éà"}]]);class s{static prefix="[er-virtual-keyboard]";static set(e,t){localStorage[this.prefix+e]=JSON.stringify({value:t})}static get(e,t){const d=localStorage[this.prefix+e];return d?JSON.parse(d).value:t||null}}class i{constructor(e,t,d,s){const i=document.createElement(e);t&&(i.className=t),d&&Object.assign(i,d),s&&s.append(i),this.node=i}append(...e){this.node.append(...e.map((e=>(e=>"string"==typeof e?document.createTextNode(e):e instanceof i?e.node:e)(e))))}}class f extends i{constructor(e,t,d){super("button",`${t} ${e}`,null,d),this.code=e}}class a extends i{locales=new Map([["en",t],["ru",d]]);keys=new Map;mods=new Map([["ShiftLeft",!1],["ShiftRight",!1],["CapsLock",!1],["AltLeft",!1]]);constructor(e,d,s){super("ul","keyboard",d,s),this.textField=e,t.forEach(((e,t)=>{const d=new i("li","keyboard__item",null,this.node),s=new f(t,"keyboard__key",d.node);this.keys.set(t,s)})),this.mods=new Proxy(this.mods,{get:(e,t)=>e.get(t),set:(e,t,d)=>(e.set(t,d),this.getKeyNode(t).classList[d?"add":"remove"]("toggled"),this.renderLayout(),!0)});const a=new Map([["Backspace",()=>e.useAction("backspace")],["Delete",()=>e.useAction("delete")],["Tab",()=>e.useAction("tab")],["Enter",()=>e.useAction("enter")],["CapsLock",()=>{this.mods.CapsLock=!this.mods.CapsLock}],["ShiftLeft",({repeat:e})=>{this.mods.ShiftLeft=e||!this.mods.ShiftLeft,this.mods.AltLeft&&this.switchLocale()}],["ShiftRight",({repeat:e})=>{this.mods.ShiftRight=e||!this.mods.ShiftRight}],["ControlLeft",()=>{}],["ControlRight",()=>{}],["AltLeft",()=>{this.mods.AltLeft=!this.mods.AltLeft,this.mods.ShiftLeft&&this.switchLocale()}],["AltRight",()=>{}],["MetaLeft",()=>{}],["ArrowUp",()=>e.useAction("up")],["ArrowLeft",()=>e.useAction("left")],["ArrowDown",()=>e.useAction("down")],["ArrowRight",()=>e.useAction("right")],["default",(t,{value:d})=>{e.useAction("insert",d),t.shiftKey||([this.mods.ShiftLeft,this.mods.ShiftRight]=[!1,!1])}]]);this.useHandler=(e,t,d)=>(a.get(t)??a.get("default"))(e,d),this.renderLayout(),this.init()}init(){window.addEventListener("keydown",(e=>{const t=this.getKeyNode(e.code);t&&(this.useHandler(e,e.code,t),t.classList.add("active"),e.preventDefault())})),window.addEventListener("keyup",(e=>{const t=this.getKeyNode(e.code);t&&(["ShiftLeft","ShiftRight"].includes(e.code)&&(this.mods[e.code]=!1),t.classList.remove("active"),e.preventDefault())})),this.keys.forEach((({node:e},t)=>e.addEventListener("click",(d=>this.useHandler(d,t,e)))))}renderLayout(){const[e,t]=[this.mods.CapsLock,this.mods.ShiftLeft||this.mods.ShiftRight],d=this.locales.get(s.get("locale","en"));this.keys.forEach((s=>{const{code:i,node:f}=s,a=d.get(i)[t?"shifted":"default"];f.value=e?a[t?"toLowerCase":"toUpperCase"]():a}))}switchLocale(){s.set("locale","en"===s.get("locale","en")?"ru":"en"),[this.mods.ShiftLeft,this.mods.AltLeft]=[!1,!1]}getKeyNode(e){return this.keys.get(e)?.node}}const o=e.p+"c4e573428c57576dc136.jpg",h=e.p+"d108ad65c5881b9fe9bc.mp4";class l extends i{constructor(e){super("video","bg-video",{autoplay:!0,loop:!0,muted:!0,poster:o},e);const t=new i("source","bg-video__source",{src:h,type:"video/mp4"});this.append(t)}}const n=e.p+"f17adfe119861945d686.webm";class u extends i{static quack=new Audio(n);constructor(e,t){super("span","duck",{textContent:"ü¶Ü",...e},t),this.node.addEventListener("mousedown",(()=>u.sayQuack()))}static sayQuack(){return this.quack.currentTime=0,this.quack.play()}}class c extends i{constructor(e,t,d){super("textarea",e||"text-field",{autofocus:!0,rows:4,cols:60,...t},d)}useAction(e,...t){this[e](...t),this.node.blur(),this.node.focus()}insert(e){const{selectionStart:t,selectionEnd:d}=this.node;this.node.setRangeText(e,t,d,"end")}enter(){this.insert("\n")}tab(){this.insert("\t")}backspace(){const{selectionStart:e,selectionEnd:t}=this.node;t&&this.node.setRangeText("",e-(e===t),t,"end")}delete(){const{selectionStart:e,selectionEnd:t}=this.node;this.node.setRangeText("",e,t+(e===t),"end")}left(){this.node.selectionStart-=1,this.node.selectionEnd=this.node.selectionStart}right(){this.node.selectionEnd+=1,this.node.selectionStart=this.node.selectionEnd}up(){const{selectionStart:e,cols:t,value:d}=this.node;this.node.selectionEnd=Math.max(d.lastIndexOf("\n",e-1),e-t-1,0),this.node.selectionStart=this.node.selectionEnd}down(){const{cols:e,selectionEnd:t,value:d}=this.node;this.node.selectionEnd=Math.min(d.indexOf("\n",t+1),t+e+1,d.length),this.node.selectionStart=this.node.selectionEnd}}new class{constructor(e){this.root=e}run(){const e=new l(document.body),t=new i("main","main"),d=new i("section","section"),s=new c,f=new i("h1","heading",{textContent:"Virtual Keyboard"}),o=new u,h=new a(s),n=new i("p","disclaimer",{innerText:"The keyboard was created in the Windows 10 OS\nCombination for language switch: "}),r=new i("span","combination",{textContent:"left alt[‚éá] + shift[‚áß]",onclick:()=>h.switchLocale()});this.root.append(e.node,t.node),t.append(d),f.append(o),n.append(r),d.append(f,s,h,n)}}(document.body).run()})();